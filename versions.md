# uTerminal — история версий

| Параметр          | Описание                                                   |
| ----------------- | ---------------------------------------------------------- |
| Приложение        | [uTerminal](readme.md)                                     |
| Тема              | продвинутый терминал и плоттер для последовательного порта |
| Автор             | Riva                                                       |
| Лицензия          | [FreeBSD License, модифицированная](license.md)            |
| Начало разработки | 2017                                                       |
| Релиз             | 2017.07.04 - v0.1.2.30 (предварительный)                   |
|                   | 2022.05.27 - v1.0 (первый публичный)                       |

[TOC]

## V0.1

### `v0.1.1.18`    `2017.12.26`

1. Первая альфа-версия (прием-передача, автомат, автоответ, сигналы).

---

### `v0.1.1.19`    `2018.01.02`

1. Исправлена кодировка передаваемых данных.

---

### `v0.1.1.21`    `2018.03.23`

1. Исправлена ошибка приема символа с кодом 0.
2. Исправлены ошибки с кодировкой текста в выводе.
3. Переработано окно вставки символа.
4. Исправлен механизм вставки символа.

---

### `v0.1.2.23`    `2018.05.14`

1. Добавлена кнопка вкл/выкл HEX-вида данных.
2. Добавлено сохранение данных буфера приема в файл.
3. Добавлена загрузка данных из файла в буфер передачи.
4. Добавлена пенель быстрого доступа.

---

### `v0.1.2.24`    `2018.05.15`

1. Добавлено постороение графика по данным из буфера приема.
2. Небольшие правки расположения пунктов меню и иконок.

---

### `v0.1.2.25`    `2018.05.17`

1. Переработан интерфейс (кнопки, меню).

---

### `v0.1.2.27`    `2018.06.14`

1. Добавлена опция установки шрифта.

---

### `v0.1.2.28`    `2018.06.21`

1. Косметические правки.
2. Добавлена панель быстрых настроек порта.

---

### `v0.1.2.30`    `2018.09.20`

1. Исправлена проблема с активацией кнопки "Передать".
2. Исправление проблемы с восстановлением настроек порта (краткий вид).

---

### `v0.1.3.31`    `2021.12.16`

1. Переделаны компоненты ввода/вывода данных - TMemo -> TSynEdit
2. Добавлена опция "Командный режим" для передачи.
3. Добавлена опция "Прокручивать к концу" для приема.
4. Добавлена возможность нумерации строк данных.
5. Добавлена возможность изменять размеры полей ввода и вывода.

---

### `v0.1.3.32`    `2021.12.17`

1. Переход с CPortLib на Ararat Synapse (synaser).
2. Отдельный поток для работы с портом связи (прием и передача).
3. Получение списка портов с дружественными именами и состоянием занятости.
4. Добавлены индикаторы процессов передачи и приема.

---

### `v0.1.3.33`    `2021.12.18`

1. Реализованы сигналы RS-232 (переработано из-за перехода на synaser).
2. Переработка кода для корректной работы с новой реализацией связи.
3. Перенесены кнопки управления подключением на панель быстрых настроек порта.

---

### `v0.1.3.34`    `2021.12.20`

1. Добавлен значок в трее.
2. Добавлена кнопка "Поверх всех окон".
3. Добавлена кнопка "Сворачивать в трей".
4. Исправления ошибок в интерфейсе.
5. Окно "О программе" обновлено.

---

### `v0.1.3.35`    `2021.12.21`

1. Добавлено окно настроек.
2. Изменен алгоритм сохранения настроек.
3. Небольшие изменения в интерфейсе.

---

### `v0.1.3.36`    `2021.12.22`

1. Добавлен выключатель приемника (отдельно от общего подключения).
2. Добавлен выбор кодировки данных.
3. Добавлена опция вкл/выкл сглаживания шрифтов полей ввода/вывода.
4. Исправлены обнаруженные ошибки (по интерфейсу).

---

### `v0.1.3.37`    `2021.12.23`

1. Добавлены опции:
   - проверка доступности порта при сканировании,
   - разрешение аппаратного управления потоком,
   - настройка длительности сигнала break,
   - вставка временной метки принятых пакетов.
2. Добавлена настройка ширины символа табуляции.
3. Добавлен автоперенос длинных строкд ля режимов отображения данных, отличных от текстового.
4. Добавлена кнопка копирования принятых данных.

---

### `v0.1.3.38`    `2021.12.24`

1. Добавлен поиск и замена по полям ввода и вывода.
2. Правки в компоновке интерфейса.

---

### `v0.1.3.39`    `2021.12.25`

1. Добавлена опция выбора схемы размещения полей ввода и вывода.
2. Отправка по таймеру перенесена внутрь класса связи.
3. Добавлены пункты меню для раздела справки.
4. Косметические улучшения интерфейса.

---

### `v0.1.3.40`    `2021.12.26`

1. Добавлена настройка таймаута передачи.
2. Добавлена настройка HEX-вида данных.
3. Добавлена настройка стиля новой строки.
4. Небольшие косметические правки кода.

---

### `v0.1.3.41`    `2021.12.27`

1. Добавлен список сохраненных сообщений для передачи.

---

### `v0.1.3.42`    `2021.12.28`

1. Добавлена возможность задавать название сообщения в списке сохраненных.
2. Добавлены кодировки UTF-8.
3. Добавлена опция автоподключения к порту при запуске.
4. Исправлена ошибка при сохранении положения и размера окна.
5. Добавлена кнопка "Искать предыдущее" вместо флажка "обратно".
6. Исправлена проблема кодировок при загрузке/сохранении из/в файл(а).
7. Исправлена ошибка передачи буфера длительностью больше таймаута.

---

### `v0.1.3.43`    `2022.02.11`

1. Подключена функциональность для интернационализации интефейса.
2. Добавлен перевод English.
3. Рефакторинг участков кода в связи с реализацией интернационализации.
4. Добавлены настройки и функционал:
   - просмотр позиции курсора и размера выделения в байтах,
   - восстановление содержимого буферов при запуске приложения.

---

### `v0.1.3.44`    `2022.02.16`

1. Небольшая правка опции просмотра позиции курсора и размера выделения в байтах.
2. Добавлена опция отображения кодировки текста в заголовке поля.
3. Добавлен текст для быстрого предпросмотра шрифта при изменении в настройках.

---

### `v0.1.3.45`    `2022.02.17`

1. Исправление логики применения/отмены настроек при закрытии окна настроек.

---

### `v0.1.3.46`    `2022.05.11`

1. Исправление ошибки определения позиции курсора и размера выделения в байтах.
2. Исправлено поведение выделения при смене направления поиска.
3. В окне графика радиокнопки выбора типа данных заменены на список.
4. Добавлена настройка "Показывать подписи на индикаторах RS-232".

---

## V1.0

### `v1.0.0.47`    `2022.05.27`

1. Первый публичный релиз.

---

## V1.1

### `v1.1.0.48`    `2023.09.02`

1. Переход на Lazarus 2.2.6 FPC 3.2.2.
2. Мультистроки убраны за ненадобностью (в новой версии Lazarus баг со строками исправлен).
3. Файлы перевода теперь общие для всех версий и названий исполняемого файла.
4. Из файлов перевода исключены строки, не подлежащие переводу.
5. Добавлены новые кодировки KOI-8 (R, U, RU) вместо одной KOI-8.
6. Окно about — картинка лого в JPEG.
7. Иконка приложения пересоздана с новым набором разрешений.
8. Сплиттер полей Tx и Rx сломался в новой версии Lazarus — исправлено.
9. Тулбары полей Tx и Rx сломались в новой версии Lazarus — исправлено.
10. Добавлены скорости порта 74880 и 576000.

---

### `v1.1.1.49`    `2023.09.04`

1. Опция "Поверх всех окон" сломалась в новой версии Lazarus — исправлено частично.
2. Окно графика убрано. График перемещен в главное окно — называется теперь плоттер.

---

### `v1.1.2.50`    `2023.09.05`

1. Начата реализация нового плоттера: протестировано на простом байтовом формате.
2. Выключение приемника не восстанавливалось при запуске — исправлено.
3. Редизайн меню — убраны подпункты, переделано на один список с разделителями.
4. Добавлены флажки для управления видимостью панелей инструментов.
5. Добавлены эти же флажки в меню иконки трея.
6. Добавлено контекстное меню для пустой формы (если не отображаются поля Tx и Rx).
7. Сделано скрытие панели поиска, если не отображается ни одно из полей.
8. Скорректирована доступность инструментов для работы со списком сообщений.
9. Пустой список сохраненных сообщений не сохранялся — исправлено.

---

### `v1.1.3.51`    `2023.09.08`

1. Добавлены простые форматы плоттера со знаком (signed).

---

### `v1.1.4.52`    `2023.09.09`

1. Реализована бета-версия формата плоттера Arduino.
2. Обновлена библиотека Ararat Synapse Library Release 40.1 (Ultibo) 2017-09-29

---

### `v1.1.5.53`    `2023.09.11`

1. Продолжена работа над протоколом плоттера Arduino.
2. Поправлено некорректное поведение при редактировании заголовка сохраненного сообщения.

---

### `v1.1.6.54`    `2023.09.12`

1. Продолжена работа над протоколом плоттера Arduino.

---

### `v1.1.7.55`    `2023.09.13`

1. Продолжена работа над протоколом плоттера Arduino.
2. Продолжена разработка дизайна плоттера.
3. Добавлена настройка "Отображать все настройки подключения к порту".

---

### `v1.1.8.56`    `2023.09.14`

1. Реализован режим отображения плоттера "развертка" (как в осциллографе).

---

### `v1.1.9.57`    `2023.09.15`

1. Реализован экспорт данных плоттера в CSV.
2. Добавлены настройки для экспорта в CSV.
3. Переработан алгоритм сохранения/восстановления настроек для более удобного добавления новых пунктов.

---

### `v1.2.0.58`    `2023.09.16`

1. Закончена переработка алгоритма сохранения/восстановления настроек для более удобного добавления новых пунктов.
2. Добавлены настройки управления плоттером.
3. Отлажен экспорт данных плоттера в CSV.
4. Отлажен экспорт данных плоттера в PNG.
5. Вкладки в окне настроек заменены деревом.

---

### `v1.2.1.59`    `2023.09.18`

1. Добавлены настройки плоттера, вкладка Вид.
2. Добавлен таймер вывода новых данных плоттера для ограничения частоты обновления.

---

### `v1.2.2.60`    `2023.09.19`

1. Добавлена настройка ограничения количества семплов плоттера.
2. Сделано упрощение стилизации линий плоттера при большом количестве точек — для ускорения рендеринга.
3. Начата реализация продвинутой легенды.

---

### `v1.2.3.61`    `2023.09.20`

1. Закончена реализация легенды.
2. Добавлены настройки легенды.
3. Сделано отображение координат отслеживаемой точки под перекрестием.

---

### `v1.2.4.62`    `2023.09.21`

1. Добавлена опция выбора цвета линии плоттера по ПКМ на метке.
2. Рефакторинг настроек для более удобного доступа из других модулей.

---

### `v1.2.5.63`    `2023.09.22`

1. Подключен ChartGUIConnectorBGRA для сглаживания при рендеринге линий.
2. Устранена ошибка при уменьшении масштаба мышью в плоттере (требуется правка в исходном коде TAChart).

---

### `v1.3.0.64`    `2023.09.26`

1. Легенда не отображалась в режиме 2D — исправлено.
2. Доработан экспорт в CSV, исправлены обнаруженные ошибки.
3. Убраны списки настройки битов данных, четности, стоп-битов, все это помещено в меню одной кнопки "Дополнительные настройки порта".
4. Редизайн панели сигналов RS-232.
5. Редизайн заголовка полей Tx и Rx.
6. Убран пункт главного меню справа, в который выводились позиция и выделение текста.
7. Добавлена поддержка регулярных выражений в поиске.
8. После запуска первый щелчок мышью по таблице сообщений для отправки устанавливал выделение неправильно — исправлено.

---

### `v1.3.1.65`    `2023.09.27`

1. Реализовано выполнение команд плоттера Arduino Advanced.

---

### `v1.4.0.66`    `2023.09.30`

1. Сделана загрузка иконок в формате SVG — улучшена поддержка разных PPI.
2. Поправлены расчеты размеров компонентов, добавлена зависимость от PPI для некоторых элементов.
3. Редизайн иконки приложения.

---

### `v1.4.1.67`    `2023.10.02`

1. При ручном задании цвета линии в плоттере цвет точек не менялся — исправлено.
2. Добавлена настройка ширины "пробела" в режиме развертки.
3. Добавлена настройка размера иконок и шрифта приложения.
4. Лого в окне "О приложении" заменено на векторное в формате SVG.

---

### `v1.5.0.68`    `2023.10.05`

1. Реализована темная тема с помощью пакета MetaDarkStyle.
2. Добавлен пакет иконок для темной темы.
3. Элементы форм скорректированы для правильного отображения в разных темах.
4. Добавлена настройка цветов плоттера в темной теме.

---

### `v1.5.1.69`    `2023.10.06`

1. Сделана пауза плоттера при открытии окна настроек.
2. Исправлен некорректный размер шрифта при экспорте PNG.
3. Добавлена настройка "Субпиксельное сглаживание".
4. Добавлены настройки шрифта полей для темной темы.
5. Добавлена настройка цвета шрифта полей.
6. Скорректирована доступность элементов управления.

---

### `v1.5.2.70`    `2023.10.16`

1. Реализация пакета иконок перенесена в компонент TImageSVGList:
   - в компонент загружена светлая тема (тема по умолчанию),
   - из ресурсов подгружается темная тема.

---

### `v1.6.0.71`    `2023.10.17`

1. Начата реализация настраиваемого формата плоттера RegExp Universal.

---

### `v1.6.1.72`    `2023.10.18`

1. Отлажена реализация настраиваемого формата плоттера RegExp Universal.
2. Переработана функция вывода линий, исправлены ошибки при выводе в режиме развертки.
3. Мелкие исправления замеченных ошибок.

---

### `v1.6.2.73`    `2023.10.19`

1. Добавлена вкладка для настройки формата плоттера RegExp Universal.
2. Модуль для управления списком предустановок для формата плоттера RegExp Universal.

---

### `v1.6.3.74`    `2023.10.20`

1. Отлажена настройка формата плоттера RegExp Universal.
2. Добавлен список выбора предустановки RegExp Universal на панели быстрой настройки.
3. Добавлена настройка плоттера "Отображать количество семплов".
4. Добавлена настройка плоттера "Отображать количество поступивших данных".
5. Добавлена настройка плоттера "Дублировать данные в буфер приема".

---

### `v1.7.0.75`    `2023.10.21`

1. Доработка интерфейса в режиме плоттера.
2. Небольшие улучшающие правки.

---

### `v1.7.1.76`    `2023.11.01`

1. Рефакторинг кода окна About.
2. Добавлена настройка "Частота обновления".

---

### `v1.8.0.77`    `2023.11.02`

1. Добавлен встроенный обновитель приложения из репозитория — режим ручной проверки.
2. Обновлен скрипт сборки архива — в архив включены библиотеки OpenSSL и лицензия OpenSSL, которые требуются обновителю.

---

### `v1.8.1.78`    `2023.11.03`

1. Обновитель полностью реализован.
2. Добавлена всплывающая панель-информер для обновителя.
3. Вкладка настроек "Общие" разделена на две: эта и "Интерфейс".
4. Исправление для окна сообщений — режим отображения "инфо", без кнопок.

---

### `v1.8.2.79`    `2023.11.04`

1. В список языков добавлен пункт "System or native" для автовыбора языка.
2. Ссылки на файлы справки расширены с учетом возможного перевода.

---

### `v1.8.3.80`    `2023.11.06`

1. Добавлена настройка "отображать размер буфера в байтах" и длинные "байты" заменены короткими "Б/КБ/МБ...".
2. Исправлены пропущенные строки ресурсов.
3. Небольшой рефакторинг кода.
4. Исправление отрисовки таблицы символов.

---

### `v1.8.4.81`    `2023.11.07`

1. Добавлена возможность перетаскивания за пассивные элементы формы.
2. Добавлена опция "Граница окна".
3. Добавлена настройка "Липкое окно".
4. Поправлено поведение деактивации кнопок "HEX вид", "Номера строк" и "Поиск".
5. Рефакторинг: в формах главной и настроек перечни компонентов вынесены во включаемые файлы.

---

### `v1.8.5.82`    `2023.11.08`

1. Добавлено главное меню "Плоттер".
2. Исправление в обработчике вида для поддержки темной темы.
3. Исправление ошибки установки при перетаскивании формы за элементы.

---

### `v1.8.6.83`    `2023.11.15`

1. Изменена метка линии для форматов "Raw...".
2. Исправлена ошибка при отрисовке легенды плоттера.
3. Исправлена ошибка доступа к методу неинициализированной формы fmUpdate.

---

### `v1.8.7.84`    `2023.11.16`

1. Добавлен жест по метке для изменения размера точек: Alt + ЛКМ.

---

### `v1.8.8.85`    `2023.11.22`

1. Исправлено некорректное поведение при замене, если установлен флажок "все".

---

### `v1.8.9.86`    `2023.11.23`

1. В меню "Соединение" добавлен пункт с подменю "Доп. настройки порта".

---

### `v1.8.10.87`    `2023.11.28`

1. Небольшой рефакторинг.

---

### `v1.8.11.88`    `2023.11.28`

1. Номер сборки в окне about отделен от версии, выводится отдельно.

---

### `v2.0.0.89`    `2023.12.01`

1. Релиз версии 2.

---

### `v2.0.0.90`    `2023.12.01`

1. Поправлены недочеты, связанные с переводом интерфейса.
2. Обновлен перевод English.

---

### `v2.0.1.91`    `2025.04.02`

1. Переработано окно "About".
2. Добавлен перевод "Українська" в таблицу в справке.
3. Удалены неиспользуемые файлы переводов.
4. Поправлен файл readme.

---

### `v2.1.0.92`    `2025.04.08`

1. Переход на использование пакета AppFeaturesPkg вместо встроенных в код реализаций хранения настроек, локализации, вида формы.
2. Изменился механизм сброса настроек - завершение программы и очистка файла без удаления.

---

### `v2.1.1.93`    `2025.04.08`

1. Убрана заставка.
2. Рефакторинг кода.
3. Исправлены мелкие ошибки.

---

### `v2.1.2.94`    `2025.04.09`

1. Темная тема создается алгоритмически. Убран ее ресурс, как ненужный.
2. Исправлена ширина столбцов таблицы в окне Автоответ.
3. Рефакторинг кода применения тем.

---

### `v2.1.3.95`    `2025.04.10`

1. Оптимизация вызовов методов при инициализации приложения.
2. Исправлена ошибка в вычислении позиции курсора и размера выделенного.

---

# Идеи и планы

Идеи для расширения функционала. Намеченные планы.

- [x] добавить сохранение в файл входного и выходного буферов
- [x] добавить передачу произвольного файла
- [ ] добавить передачу текстового файла (и режим построчной передачи)
- [x] добавить кнопку вкл/выкл HEX-вида данных
- [x] добавить настройку ширины таба
- [x] добавить поиск
- [x] добавить список сохраненных сообщений для передачи
- [x] добавить опцию "вкл/выкл сохранение содержимого буферов между сеансами"
- [x] добавить флажок в меню для показа/скрытия панелей инструментов
- [x] переделать заголовки зон tx и rx
- [ ] на плоттер попадают данные с временными метками – может поправить это?
- [x] починить сохранение ответных последовательностей
- [x] темная тема
- [x] добавить regex в поиск
- [ ] добавить поддержку скриптов (в основном для отправки сообщений)
